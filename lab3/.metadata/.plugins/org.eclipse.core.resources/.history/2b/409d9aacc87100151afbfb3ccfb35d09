/*
 * swich.cc
 *
 *  Created on: Oct 13, 2015
 *      Author: parallels
 */

#include "swich.h"
#include <iostream>
#include <fstream>
#include <string>
using namespace std;
using basic_protocol::basic_status;

sw::sw(sc_module_name module_name, int k, int i) : //constructor
		sc_module(module_name), target_port1("iport1"),target_port2("iport2"),target_port3("iport3"),
		target_port4("iport4"),initiator_port1("iport5"),initiator_port2("iport6"),initiator_port3("iport7"),
		initiator_port4("iport8"),i(i) {
	target_port1(*this);
	target_port2(*this);
	target_port3(*this);
	target_port4(*this);

}

basic_status sw::write(const ADDRESS_TYPE &a, const DATA_TYPE &d) {
	if(a==1) {
		initiator_port1.write(a, d);
	}

	if(a==2) {

	}

	if(a==3) {

	}

	return basic_protocol::SUCCESS;
}

basic_status sw::read(const ADDRESS_TYPE &a, DATA_TYPE &d) {
	d = memory[a];
	cout << name() << " Memory " << i << ":reading at " << a << " value " << d
			<< endl;
	return basic_protocol::SUCCESS;
}

sw::~sw() {
}
